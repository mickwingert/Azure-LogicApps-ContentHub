# Content Hub - Social Connector

## Pre-requisites

* The LogicApp requires an Azure Service Bus with a valid Topic subscriptions created and linked to your Content Hub instance. Creation instructions for a ContentHub ServiceBus can be found in the standard Sitecore CMP connector instructions
* A Buffer account is required, with a linked Social Profile being assigned.
[Create Buffer Account](https://login.buffer.com/signup?product=publish&plan=pro&cycle=month&cta=bufferSite-signin-createAccountLink-publishPro-1&redirect=https%3A%2F%2Fpublish.buffer.com)

## Logic Apps Installation Guide

1. Create a new Azure Logic App within your Azure Subscription
2. After automation has created the infrastructure for the LogicApps, create a Blank trigger point template
3. Click **Code View** and copy/paste the code from logicapp.json
4. Switch back to the **Designer** view
5. Select the entry trigger point, and select **Change connection**
![Topic Trigger](https://raw.githubusercontent.com/mickwingert/Azure-LogicApps-ContentHub/master/ContentHub-SocialConnector/docs/images/TopicTrigger.PNG?token=AAYSZQW4MOUNTDYTZMXHRN26PA7HA)
6. Select **Add new** and select your previously created Service Bus
7. Select the Buffer action at the bottom of the LogicApps template
8. Select **Change connection**
9. Login using your Buffer credentials
10. Save your LogicApps template

## Content Hub Action Configuration
The Social Connector requires two additional header parameters to be added to the outbound Content Hub Action to the Service Bus.

* authToken
* hostUrl

#### AuthToken
This is to pass in your AuthToken authorization for the ContentHub API's (generate token through the ContentHub API documenation)

#### HostUrl
The HostUrl parameter has been added to allow you to re-use the LogicApp across multiple Content Hub instances if required

## Action Configuration
1. Edit the Service Bus action you have previously created as part of the CMP connector integration
2. Select **ADD HEADER**
3. Add the key value **authToken** and enter the token value generated by the API
4. Add the key value **hostUrl** and enter the current Content Hub instance URL you are using, e.g. mycontenthubinstance.stylelabs.io
> Omit the https as it is automatically inferred and added by the LogicApp
5. Save

### Trigger Configuration
Create a new Content Hub trigger based on the conditions you require to push a particular CMP Content Entity to the LogicApp for processing and publishing

> As a simple starting point, utilise the default **Social Media** Content Type for new demo content

1. Select the **Conditions** tab within the Trigger Details page
2. **Add Definition** of type **M.Content**
3. Add **Condition**
   * **Status (ContentLifeCycleToContent)**
   * Select **Final** as the Life cycle status
4. Add **Condition**
   * **Type (ContentTypeToContent)**
   * Select **Social media** as the content type
5. Select the **Actions** tab
6. Select your previously created Action to Azure Service Bus
7. Save

